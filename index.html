<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Servicios de Soporte TÃ©cnico</title>
  <link rel="stylesheet" href="style_inicio.css">
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
    <h2>ğŸ PiÃ±a Digital</h2>

    <nav>
      <a href="Analisis.html">ğŸ“Š AnÃ¡lisis EstadÃ­stico</a>
      <a href="inventario.html">ğŸ“¦ Inventario</a>
      <a href="notasv.html">ğŸ§¾ Notas de Venta</a>
      <a href="tienda.html">ğŸ  Tienda Virtual</a>
    </nav>
  </div>

  <!-- Contenido -->
  <div class="content">

    <!-- Header -->
    <div class="header">

      <!-- Logo + Marca -->
      <div class="brand">
        <img src="PiÃ±a Digita.png" alt="La PiÃ±a Logo">
        <span style="font-weight:600; font-size:18px;">Servicios TÃ©cnicos</span>
      </div>

      <!-- Buscador -->
      <div class="controls">
        <input type="text" placeholder="Buscar...">
      </div>

      <!-- MenÃº de usuario -->
      <div class="user-menu">
        <button id="userBtn" class="user-btn">
          <img src="userIcon.png" alt="Usuario" class="user-img">
          <span class="user-name"></span>
          <span class="arrow">â–¼</span>
        </button>

        <div id="dropdownMenu" class="dropdown-content">
          <a href="#">ğŸ‘¤ Perfil</a>
          <a href="#">âš™ ConfiguraciÃ³n</a>
          <a href="login.html">ğŸšª Cerrar sesiÃ³n</a>
        </div>
      </div>

    </div>

    <!-- Tabla envuelta en un card bonito -->
    <div class="table-wrapper">
      <h2 style="margin-bottom:12px;">Servicios de Soporte TÃ©cnico</h2>

      <table>
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Celular</th>
            <th>NÃºmero</th>
            <th>F.EmisiÃ³n</th>
            <th>Marca</th>
            <th>Costo</th>
            <th>AcciÃ³n</th>
          </tr>
        </thead>
        <tbody id="tabla-servicios">
          <!-- AquÃ­ Supabase cargarÃ¡ los datos -->
        </tbody>
      </table>
    </div>

  </div>

  <!-- BotÃ³n flotante (+) -->
  <button id="openModal" class="btn-plus">+</button>

  <!-- Modal -->
  <div id="modalForm" class="modal">
    <div class="modal-content">
      <h2>Nuevo Servicio TÃ©cnico</h2>

      <form id="form-servicio">

        <label>Cliente</label>
        <input id="cliente" type="text" required>

        <label>DescripciÃ³n</label>
        <input id="descripcion" type="text">

        <label>Estado</label>
        <input id="estado" type="text">

        <label>Celular</label>
        <input id="celular" type="text">

        <label>Costo</label>
        <input id="costo" type="number">

        <label>Marca</label>
        <input id="marca" type="text">

        <div class="form-actions">
          <button type="button" id="closeModal" class="btn btn-secondary">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar</button>
        </div>

      </form>
    </div>
  </div>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Script CRUD -->
  <script src="script.js"></script>

  <script>
    // Modal
    const modal = document.getElementById("modalForm");
    const openModal = document.getElementById("openModal");
    const closeModalBtn = document.getElementById("closeModal");

    openModal.onclick = () => modal.style.display = "flex";
    closeModalBtn.onclick = () => modal.style.display = "none";
    window.onclick = (e) => { if (e.target == modal) modal.style.display = "none"; };

    // MenÃº usuario
    const userBtn = document.getElementById("userBtn");
    const dropdownMenu = document.getElementById("dropdownMenu");
    const arrow = document.querySelector(".arrow");

    userBtn.onclick = (e) => {
      e.stopPropagation();
      dropdownMenu.classList.toggle("show");
      arrow.classList.toggle("rotate");
    };

    window.onclick = (e) => {
      if (!e.target.closest(".user-menu")) {
        dropdownMenu.classList.remove("show");
        arrow.classList.remove("rotate");
      }
    };
  </script>

</body>
</html>
